# Fortune Cookie Gacha - ã‚¬ã‚¹ãƒ¬ã‚¹æ±ºæ¸ˆãƒ‡ãƒ¢

USDCï¼ˆBase Sepoliaï¼‰ã¨JPYCï¼ˆSepoliaï¼‰ã‚’ä½¿ã£ãŸã‚¬ã‚¹ãƒ¬ã‚¹æ±ºæ¸ˆã®ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

## ä¸»ãªæ©Ÿèƒ½

### ğŸ° Fortune Cookie Gachaï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
- **ã‚¬ãƒãƒ£ãƒã‚·ãƒ³é¢¨UI**: CSSã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚¬ãƒãƒ£ãƒã‚·ãƒ³ã‚’å†ç¾
- **x402æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼**: HTTP 402 + ERC-3009ã«ã‚ˆã‚‹æ±ºæ¸ˆ
- **Chainlinkä¾¡æ ¼ãƒ•ã‚£ãƒ¼ãƒ‰**: JPY/USDç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å–å¾—
- **Fortune Cookie API**: å¤–éƒ¨APIã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒãƒ¥ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—
- **ãƒãƒ«ãƒãƒˆãƒ¼ã‚¯ãƒ³å¯¾å¿œ**: USDC ($0.50) / JPYC (ç´„75å††) ã§æ”¯æ‰•ã„å¯èƒ½

### ğŸ’³ ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ©Ÿèƒ½ï¼ˆ/walletï¼‰
- **Passkeyãƒ¢ãƒ¼ãƒ‰**: ERC-4337 + Paymaster ã§ã‚¬ã‚¹ãƒ¬ã‚¹é€é‡‘
- **EOAãƒ¢ãƒ¼ãƒ‰**: ERC-3009 + Facilitator ã§ã‚¬ã‚¹ãƒ¬ã‚¹é€é‡‘
- **QRæ±ºæ¸ˆ**: ã‚¹ã‚­ãƒ£ãƒ³æ‰•ã„å¯¾å¿œ

## ãƒ‡ãƒ¢ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   / (ã‚¬ãƒãƒ£)    â”‚  ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚¦ã‚©ãƒ¬ãƒƒãƒˆæ¥ç¶š  â”‚  WalletConnect
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒˆãƒ¼ã‚¯ãƒ³é¸æŠ    â”‚  USDC / JPYC
â”‚ (æ®‹é«˜è¡¨ç¤º)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Play ãƒœã‚¿ãƒ³    â”‚  æ®‹é«˜ä¸è¶³æ™‚ã¯ç„¡åŠ¹åŒ–
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EIP-712ç½²å    â”‚  transferWithAuthorization
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Facilitator    â”‚  ã‚¬ã‚¹ä»£è² æ‹…ã§å®Ÿè¡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fortuneè¡¨ç¤º    â”‚  ãƒœãƒ¼ãƒ«ãŒè½ã¡ã¦çµæœè¡¨ç¤º
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¯¾å¿œãƒˆãƒ¼ã‚¯ãƒ³

| ãƒˆãƒ¼ã‚¯ãƒ³ | ãƒã‚§ãƒ¼ãƒ³ | Decimals | EIP-712 Domain |
|---------|---------|----------|----------------|
| USDC | Base Sepolia | 6 | name: "USDC", version: "2" |
| JPYC | Sepolia | 18 | name: "JPY Coin", version: "1" |

## 2ã¤ã®ãƒ¢ãƒ¼ãƒ‰

| ãƒ¢ãƒ¼ãƒ‰ | å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ | æŠ€è¡“ | ã‚¬ã‚¹è² æ‹… |
|--------|-------------|------|----------|
| **Passkey** | æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ | ERC-4337 + Paymaster | Pimlico |
| **EOA** | æ—¢å­˜ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ | ERC-3009 + Facilitator | ã‚µãƒ¼ãƒãƒ¼ |

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| æŠ€è¡“ | ç”¨é€” |
|------|------|
| [Next.js](https://nextjs.org/) 16 | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| [viem](https://viem.sh/) | Ethereumãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| [wagmi](https://wagmi.sh/) | React Hooks for Ethereum |
| [Reown AppKit](https://reown.com/) | WalletConnectå¯¾å¿œ |
| [Pimlico](https://pimlico.io/) | Bundler & Paymaster |
| [Coinbase Smart Wallet](https://github.com/coinbase/smart-wallet) | ERC-4337 Smart Account |
| [Chainlink](https://chain.link/) | JPY/USD ä¾¡æ ¼ãƒ•ã‚£ãƒ¼ãƒ‰ (Mainnet) |
| [Fortune Cookie API](https://apiverve.com/) | ãƒ•ã‚©ãƒ¼ãƒãƒ¥ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾— |

## æ©Ÿèƒ½

### Passkeyãƒ¢ãƒ¼ãƒ‰ï¼ˆSmart Walletï¼‰
- **Passkeyèªè¨¼**: Touch ID / Face ID / ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚­ãƒ¼ã§ã‚¦ã‚©ãƒ¬ãƒƒãƒˆä½œæˆ
- **Smart Account**: Coinbase Smart Wallet (ERC-4337)
- **Paymaster**: Pimlico Paymasterã«ã‚ˆã‚‹ã‚¬ã‚¹ãƒ¬ã‚¹é€é‡‘
- **å¯¾å¿œãƒˆãƒ¼ã‚¯ãƒ³**: USDC (Base Sepolia)

### EOAãƒ¢ãƒ¼ãƒ‰ï¼ˆæ—¢å­˜ã‚¦ã‚©ãƒ¬ãƒƒãƒˆï¼‰
- **WalletConnectå¯¾å¿œ**: MetaMask, Rainbow, Coinbase Walletç­‰
- **ãƒãƒ«ãƒãƒã‚§ãƒ¼ãƒ³**: USDC (Base Sepolia) / JPYC (Sepolia) åˆ‡ã‚Šæ›¿ãˆ
- **ERC-3009**: `transferWithAuthorization`ã«ã‚ˆã‚‹ç½²åãƒ™ãƒ¼ã‚¹é€é‡‘
- **Facilitator**: ã‚µãƒ¼ãƒãƒ¼ãŒã‚¬ã‚¹ä»£ã‚’è² æ‹…
- **QRæ±ºæ¸ˆ**: ã‚¹ã‚­ãƒ£ãƒ³æ‰•ã„å¯¾å¿œ

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### Passkeyãƒ¢ãƒ¼ãƒ‰ï¼ˆERC-4337 + Paymasterï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Passkey       â”‚  WebAuthn P256ç½²å
â”‚  (Touch IDç­‰)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Coinbase Smart  â”‚  ERC-4337 Smart Account
â”‚    Account      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Pimlico      â”‚  Bundler + Paymaster
â”‚   (Gasless)     â”‚  ã‚¬ã‚¹ä»£ã‚¹ãƒãƒ³ã‚µãƒ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Base Sepolia   â”‚
â”‚     USDC        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### EOAãƒ¢ãƒ¼ãƒ‰ï¼ˆERC-3009 + Facilitatorï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MetaMaskç­‰     â”‚  WalletConnectæ¥ç¶š
â”‚  (EOA Wallet)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒˆãƒ¼ã‚¯ãƒ³é¸æŠ   â”‚  USDC / JPYC
â”‚  ãƒã‚§ãƒ¼ãƒ³åˆ‡æ›¿   â”‚  Base Sepolia / Sepolia
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   EIP-712       â”‚  transferWithAuthorization
â”‚   ç½²åç”Ÿæˆ      â”‚  (ERC-3009)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Facilitator    â”‚  ç½²åã‚’å—ã‘å–ã‚Š
â”‚   (Server)      â”‚  ã‚¬ã‚¹ä»£ã‚’è² æ‹…ã—ã¦å®Ÿè¡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Base Sepolia        â”‚    Sepolia   â”‚
â”‚  USDC                â”‚    JPYC      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install --legacy-peer-deps
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:

```env
# Pimlico (Passkeyãƒ¢ãƒ¼ãƒ‰ç”¨)
NEXT_PUBLIC_PIMLICO_API_KEY=pim_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Facilitator (EOAãƒ¢ãƒ¼ãƒ‰/ã‚¬ãƒãƒ£ç”¨) - ã‚¬ã‚¹ä»£ã‚’è² æ‹…ã™ã‚‹ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®ç§˜å¯†éµ
# æ³¨æ„: Base Sepoliaã¨Sepoliaã®ä¸¡æ–¹ã«ETHãŒå¿…è¦
FACILITATOR_PRIVATE_KEY=0x...

# Reown/WalletConnect
NEXT_PUBLIC_REOWN_PROJECT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Fortune Cookie API (ã‚¬ãƒãƒ£ç”¨)
FORTUNE_API_KEY=your_api_key_here

# ã‚¬ãƒãƒ£å—å–å…ˆã‚¢ãƒ‰ãƒ¬ã‚¹ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
GACHA_RECIPIENT_ADDRESS=0x...
```

**å–å¾—å…ˆ:**
- [Pimlico Dashboard](https://dashboard.pimlico.io/) - Pimlico API Key
- [Reown Cloud](https://cloud.reown.com/) - Reown Project ID
- [APIVerve](https://apiverve.com/) - Fortune Cookie API Key

### 3. Facilitatorã¸ã®å…¥é‡‘

EOAãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€Facilitatorã‚¦ã‚©ãƒ¬ãƒƒãƒˆã«ä¸¡ãƒã‚§ãƒ¼ãƒ³ã®ETHãŒå¿…è¦ã§ã™ï¼š

```bash
# Base Sepolia Faucet
https://www.coinbase.com/faucets/base-ethereum-goerli-faucet

# Sepolia Faucet
https://sepoliafaucet.com/
```

### 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹

## ä½¿ã„æ–¹

### Passkeyãƒ¢ãƒ¼ãƒ‰
1. ã€ŒPasskey (Smart Wallet)ã€ã‚’é¸æŠ
2. ã€ŒPasskeyã§ã‚¦ã‚©ãƒ¬ãƒƒãƒˆä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ‡ãƒã‚¤ã‚¹ã®Passkeyï¼ˆTouch ID / Face IDç­‰ï¼‰ã§èªè¨¼
4. å›ºå®šã®é€é‡‘å…ˆãƒ»é‡‘é¡ã§ã€ŒPasskeyã§ç½²åã—ã¦é€é‡‘ã€

### EOAãƒ¢ãƒ¼ãƒ‰
1. ã€ŒEOA (MetaMask)ã€ã‚’é¸æŠ
2. **ãƒˆãƒ¼ã‚¯ãƒ³é¸æŠ**: USDC / JPYC ãƒœã‚¿ãƒ³ã§åˆ‡ã‚Šæ›¿ãˆ
3. ã€Œã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’æ¥ç¶šã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. WalletConnectã§MetaMaskç­‰ã‚’æ¥ç¶š
5. ãƒã‚§ãƒ¼ãƒ³åˆ‡ã‚Šæ›¿ãˆã‚’æ‰¿èªï¼ˆè‡ªå‹•ã§è¦æ±‚ã•ã‚Œã¾ã™ï¼‰
6. **ç›´æ¥é€é‡‘**: ã€Œé€é‡‘ã™ã‚‹ã€ãƒœã‚¿ãƒ³
7. **QRæ±ºæ¸ˆ**: ã€Œã‚¹ã‚­ãƒ£ãƒ³æ‰•ã„ã€â†’ QRã‚¹ã‚­ãƒ£ãƒ³ â†’ ã€Œæ”¯æ‰•ã†ã€

### QRæ±ºæ¸ˆãƒ•ãƒ­ãƒ¼ï¼ˆåº—èˆ—å‘ã‘ï¼‰

```
åº—èˆ—å´                        é¡§å®¢å´
â”€â”€â”€â”€â”€â”€â”€                      â”€â”€â”€â”€â”€â”€â”€
QRã‚³ãƒ¼ãƒ‰è¡¨ç¤º        â†’        ã‚¹ãƒãƒ›ã§Webã‚¢ãƒ—ãƒªé–‹ã
ï¼ˆåº—èˆ—ã®è­˜åˆ¥ç”¨ï¼‰              â†“
                            WalletConnectæ¥ç¶š
                              â†“
                            ãƒˆãƒ¼ã‚¯ãƒ³é¸æŠï¼ˆUSDC/JPYCï¼‰
                              â†“
                            ã€Œã‚¹ã‚­ãƒ£ãƒ³æ‰•ã„ã€ã‚¿ãƒƒãƒ—
                              â†“
                            åº—èˆ—QRã‚’ã‚¹ã‚­ãƒ£ãƒ³
                              â†“
                            ã€Œæ”¯æ‰•ã†ã€ã‚¿ãƒƒãƒ—
                              â†“
                            MetaMaskã§ç½²å
                              â†“
å®Œäº†ï¼              â†        FacilitatorãŒé€é‡‘å®Ÿè¡Œ
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx                    # /gacha ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
â”‚   â”‚   â”œâ”€â”€ gacha/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                # ã‚¬ãƒãƒ£ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ wallet/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                # ã‚¦ã‚©ãƒ¬ãƒƒãƒˆãƒšãƒ¼ã‚¸ (Passkey/EOA)
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â”œâ”€â”€ gacha/
â”‚   â”‚       â”‚   â””â”€â”€ route.ts            # ã‚¬ãƒãƒ£API (x402æ±ºæ¸ˆ)
â”‚   â”‚       â””â”€â”€ facilitator/
â”‚   â”‚           â””â”€â”€ erc3009/
â”‚   â”‚               â””â”€â”€ route.ts        # ERC-3009 Facilitator API
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ GachaContent.tsx            # ã‚¬ãƒãƒ£UI + ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ PasskeyWallet.tsx           # Passkeyãƒ¢ãƒ¼ãƒ‰ (USDC)
â”‚   â”‚   â”œâ”€â”€ EOAWallet.tsx               # EOAãƒ¢ãƒ¼ãƒ‰ (USDC/JPYC)
â”‚   â”‚   â”œâ”€â”€ QRReceive.tsx               # QRã‚³ãƒ¼ãƒ‰è¡¨ç¤º
â”‚   â”‚   â”œâ”€â”€ QRScanner.tsx               # QRã‚¹ã‚­ãƒ£ãƒŠãƒ¼
â”‚   â”‚   â””â”€â”€ providers/
â”‚   â”‚       â””â”€â”€ ReownProvider.tsx       # WalletConnect Provider
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ config.ts                   # ãƒˆãƒ¼ã‚¯ãƒ³ãƒ»ãƒã‚§ãƒ¼ãƒ³è¨­å®š
â”‚       â”œâ”€â”€ chainlink.ts                # Chainlinkä¾¡æ ¼ãƒ•ã‚£ãƒ¼ãƒ‰
â”‚       â”œâ”€â”€ passkey.ts                  # Passkey + Smart Account
â”‚       â”œâ”€â”€ erc3009.ts                  # ERC-3009ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â”œâ”€â”€ wagmi.ts                    # wagmiè¨­å®š
â”‚       â””â”€â”€ qrPayment.ts                # QRæ±ºæ¸ˆãƒ‡ãƒ¼ã‚¿å½¢å¼
```

## ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹

| ãƒˆãƒ¼ã‚¯ãƒ³ | ã‚¢ãƒ‰ãƒ¬ã‚¹ | ãƒã‚§ãƒ¼ãƒ³ |
|---------|----------|----------|
| USDC | `0x036CbD53842c5426634e7929541eC2318f3dCF7e` | Base Sepolia |
| JPYC | `0x431D5dfF03120AFA4bDf332c61A6e1766eF37BDB` | Sepolia |

## æŠ€è¡“çš„èƒŒæ™¯

### ERC-3009: Transfer With Authorization
USDCã¨JPYCãŒå®Ÿè£…ã—ã¦ã„ã‚‹è¦æ ¼ã€‚ç½²åã®ã¿ã§ãƒˆãƒ¼ã‚¯ãƒ³è»¢é€ã‚’æ‰¿èªã§ãã€
FacilitatorãŒã‚¬ã‚¹ä»£ã‚’è² æ‹…ã—ã¦`transferWithAuthorization()`ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```solidity
function transferWithAuthorization(
    address from,
    address to,
    uint256 value,
    uint256 validAfter,
    uint256 validBefore,
    bytes32 nonce,
    uint8 v, bytes32 r, bytes32 s
) external;
```

### EIP-712 ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š
ãƒˆãƒ¼ã‚¯ãƒ³ã”ã¨ã«ç•°ãªã‚‹EIP-712ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½¿ç”¨ï¼š

| ãƒˆãƒ¼ã‚¯ãƒ³ | name | version |
|---------|------|---------|
| USDC | "USDC" | "2" |
| JPYC | "JPY Coin" | "1" |

### Coinbase Smart Wallet + P256
Coinbase Smart Walletã¯P256ï¼ˆsecp256r1ï¼‰ç½²åã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ã«ã‚µãƒãƒ¼ãƒˆã€‚
Passkeyã§ç½²åã—ãŸUserOperationã‚’ç›´æ¥æ¤œè¨¼ãƒ»å®Ÿè¡Œã§ãã¾ã™ã€‚

### WalletConnect / Reown
ãƒ¢ãƒã‚¤ãƒ«ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã¨ã®æ¥ç¶šã‚’å¯èƒ½ã«ã™ã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µãªã—ã§MetaMaskã‚¢ãƒ—ãƒªç­‰ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

### Chainlink Price Feed
JPY/USDç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã‚’Ethereum Mainnetã‹ã‚‰å–å¾—ã€‚
JPYCæ”¯æ‰•ã„æ™‚ã®ä¾¡æ ¼è¨ˆç®—ã«ä½¿ç”¨ã—ã¾ã™ã€‚

```
Feed Address: 0xBcE206caE7f0ec07b545EddE332A47C2F75bbeb3
Chain: Ethereum Mainnet
```

- 1åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§é«˜é€ŸåŒ–
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä¾¡æ ¼: 150 JPY/USD

## æ³¨æ„äº‹é …

- **HTTPSå¿…é ˆ**: WebAuthn APIã¯localhostä»¥å¤–ã§ã¯HTTPSç’°å¢ƒãŒå¿…è¦
- **ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ**: Chrome, Safari, Firefoxç­‰ã®ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ãŒå¿…è¦
- **Testnet**: Base Sepoliaã¨Sepoliaãƒ†ã‚¹ãƒˆãƒãƒƒãƒˆç”¨ã®ãƒ‡ãƒ¢ã§ã™
- **Facilitatoræ®‹é«˜**: EOAãƒ¢ãƒ¼ãƒ‰ã§ã¯Facilitatorã‚¦ã‚©ãƒ¬ãƒƒãƒˆã«**ä¸¡ãƒã‚§ãƒ¼ãƒ³**ã®ETHãŒå¿…è¦

## å‚è€ƒãƒªãƒ³ã‚¯

### Account Abstraction
- [viem Account Abstraction](https://viem.sh/account-abstraction)
- [Pimlico Documentation](https://docs.pimlico.io/)
- [Coinbase Smart Wallet](https://github.com/coinbase/smart-wallet)
- [ERC-4337](https://eips.ethereum.org/EIPS/eip-4337)

### ERC-3009 / Gasless Transfers
- [EIP-3009: Transfer With Authorization](https://eips.ethereum.org/EIPS/eip-3009)
- [Circle USDC](https://developers.circle.com/stablecoins/docs)
- [JPYC](https://jpyc.jp/)

### WalletConnect
- [Reown AppKit](https://reown.com/appkit)
- [wagmi Documentation](https://wagmi.sh/)

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
